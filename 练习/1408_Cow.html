
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
Welcome to XTU OnlineJudge</title>
<link rel='stylesheet' type='text/css' href='/exam/Web/Tpl/default/Public/Css/style_user.css' />
<link rel="stylesheet" href="/markdown.css" type="text/css" />
<link rel="stylesheet" href="/md_back.css" type="text/css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$', '$$'], ["\\[", "\\]"] ],
            processEscapes: true
          },
          TeX: {
            equationNumbers: {
              autoNumber: 'AMS'
            }
          },
          "HTML-CSS": {
            imageFont: null
          }
        });
  </script>
  <script type="text/javascript" src="/MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

</style>
</head>
<body>

  <div id="header"> 
    <div id="xtu_logo"><img src="/exam/Web/Tpl/default/Public/Images/xtu_logo.jpg" alt="XiangTan University" /></div>
    <div id="xtu">XiangTan&nbsp;&nbsp;University<br />
    OnlineJudge&nbsp;&nbsp;For&nbsp;&nbsp;Programming</div>
    <div id="acm_logo"><img src="/exam/Web/Tpl/default/Public/Images/acm_small.jpg" alt="ACM/ICPC" /></div>
  </div>
  <div class="hr"></div>
  <div id="menu">
  	<div>
    <table width="100%" border="0">
      <tr class="menu_title">
        <td><a href="/exam/index.php">Home Page</a></td>
        <td><a href="/exam/index.php/problem">ALL Problems</a></td>
        <td><a href="/exam/index.php/solution/submit">Submit Source Code</a></td>
        <td><a href="/exam/index.php/solution/onlinestatus">Online Status</a></td>
        <td><a href="/exam/index.php/news">F.A.Qs &amp; Help</a></td>
      </tr>
      <tr class="menu_title">
        <td><a href="/exam/index.php/exam/current">Current Exams</a></td>
        <td><a href="/exam/index.php/exam/past">Past Exams</a></td>
        <td>Scheduled Exams</td>
        <td><a href="/exam/index.php/user/ranklist">User Ranklist</a></td>
        <td><a href="http://202.197.224.59/qa/" target="_blank"> Discusss </a></td>
      </tr>     
    </table>
	</div>
	<div class="hr"></div>
    <div id="menu_left">
		  
	<table width="100%" border="0">
	  <form action="" method="post" name="login">
	  		<input name="crsf_token" type="hidden" id="crsf_token" value="36dc81caf29d0ac9279d782221fc74d2"/>
        <tr>
          <td>&nbsp;&nbsp;StudentID:</td>
          <td><input name="username" type="text" id="username" tabindex="1" size="8" />
          <input name="capture" type="hidden" id="capture" value="login" /></td>
          <td>&nbsp;&nbsp;<a href="/exam/index.php/user/register">Create New Account </a></td>
        </tr>
        <tr>
          <td>&nbsp;&nbsp;Password:</td>
          <td><input name="password" type="password" id="password" tabindex="2" size="8" />
          <input type="submit" name="Submit" value="Login" tabindex="3" /></td>
          <td>&nbsp;&nbsp;<a href="/exam/index.php/user/remind">Forgot Your Password or Username</a></td>
        </tr>
	  </form>
      </table>    </div>
    <div id="menu_right">
      <table width="100%" border="0">
	  <form action="" method="post" name="gotoproblem">
	  	<input name="crsf_token" type="hidden" id="crsf_token" value="28acda660d7772444231b70d9f9abbce"/>        <tr>
          <td align="right">ProblemID:</td>
          <td><input name="problem_id" type="text" id="problem_id" tabindex="11" size="8" />
            <input type="submit" name="Submit2" value="Go Problem" tabindex="12" />
            <input name="capture" type="hidden" id="capture" value="goproblem" /></td>
        </tr>
	  </form>
	  <form action="" method="post" name="searchuser">
	  	<input name="crsf_token" type="hidden" id="crsf_token" value="4b30da1f262d3b1eff4dc7475933d431"/>        <tr>
          <td align="right">User Name:</td>
          <td><input name="username" type="text" id="username" tabindex="21" size="8" />
            <input type="submit" name="Submit3" value="SearchUser" tabindex="22" />
            <input name="capture" type="hidden" id="capture" value="searchuser" /></td>
        </tr>
	  </form>
      </table>
    </div>
  </div>
  <div id="news">
  	<MARQUEE scrollAmount=3 scrollDelay=150 behavior=alternate><p><font color="#0000ff"><strong>公告</strong></font>:&nbsp; <font style="background-color: rgb(255,255,255)" color="#000000"><font style="background-color: rgb(255,255,255)"><strong>支持Java，请使用Main类内含静态main方法</strong>。64位整数可以使用%I64d。</font></font></p>
<p><font color="#339966"><strong>程序设计实践考试安排请询问教务干事老师，CSP成绩换算问题请询问王婷老师</strong></font></p>
<p><strong><font color="#339966"><font color="#FF0000"><a href="/exam/index.php/solution/stat/cids/409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430">2023年C语言作业统计</a>  入队第一步，AK作业题，<a href="http://202.197.224.59/bm/">招新宣传点这 </a><a href="https://v.qq.com/x/page/v0812dpjirs.html">湘潭大学ACM/ICPC金牌团队</a></font></font></strong></p>
<p>密码重置或新增账号，点<a href="https://www.wenjuan.com/s/QvQZfui/">这里</a>登记，管理员不定期操作</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong><font color="#339966"><font color="#FF0000"> </font></font></strong></p>
<p>&nbsp;</p></MARQUEE>
  </div>
  <div class="hr"></div>
<div id="content">
  <div>
  <table width="100%" border="0">
  <tr align="center">
    <td colspan="3"><h2>Cow</h2></td>
  </tr>
  <tr align="center">
    <td colspan="3">[ <a href="/exam/index.php/solution/submit/id/1408/exam_id/427">Submit Code</a> ]
    	[ <a href="/exam/index.php/solution/top20/pid/1408">Top 20 Runs</a> ]
    	[ <a href="/exam/index.php/solution/onlinestatus/exam_id/427/problem_id/1408">Runs Status</a> ]
    	</td>
  </tr>
  <tr align="center">
    <td width="49%" align="right">Acceteped : 454 </td>
    <td width="2%">&nbsp;</td>
    <td width="49%" align="left"> Submit : 1838 </td>
  </tr>
  <tr align="center">
    <td align="right">Time Limit : 1000 MS</td>
    <td>&nbsp;</td>
    <td align="left">Memory Limit : 65536 KB</td>
  </tr>
  <tr>
    <td colspan="3">&nbsp;</td>
  </tr>
  <tr>
    <td colspan="3"><h3>Description</h3></td>
  </tr>
  
  <tr>
    <td colspan="3"><div><div class="container">
      <div id="markup">
        <article id="content" class="markdown-body">
          <h1>Cow</h1>
<h2>题目描述</h2>
<p>农夫约翰有一个农场，他把上面分成了<mathjax>$n \times m$</mathjax>个格子，每个格子里养了一头牛。
但是有<mathjax>$p$</mathjax>对相邻格子（有共同边的格子）的牛是敌对关系，喜欢打架，约翰想做一些栅栏把他们分开。
所有的栅栏都是沿着边线的，横的或者竖的，每条栅栏都是贯穿整个横边或者竖边的。
但是约翰的预算有限，他想知道最多建<mathjax>$k$</mathjax>条栅栏使得尽可能减少打架的牛的对数。
比如下图中，相同的字符表示会相互打架的牛，我们可以建3条栅栏（红线），使得所有敌对关系的牛都隔离开。</p>
<p><img src="data:image/jpeg;base64,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" alt="cow" /></p>
<h2>输入</h2>
<p>第一行是一个整数<mathjax>$T(1\le T \le 400)$</mathjax>，表示样例的个数。
每个样例的第一行是<mathjax>$4$</mathjax>个整数<mathjax>$n(1 \le n \le 100),m(1 \le m \le 100),p(1 \le p \le 2nm-n-m),k(1 \le k \le max(1,n+m-2))$</mathjax>。
以后的<mathjax>$p$</mathjax>行，每行<mathjax>$4$</mathjax>个整数<mathjax>$x_1,y_1,x_2,y_2 (1 \le x_1 , x_2 \le m; 1 \le y_1,y_2 \le n)$</mathjax>，表示<mathjax>$(x_1,y_1)$</mathjax>与<mathjax>$(x_2,y_2)$</mathjax>的牛需要分开。输入保证没有重复信息并且输入的都是相邻格。</p>
<h2>输出</h2>
<p>每行输出一个样例的结果，输出在建立<mathjax>$k$</mathjax>条栅栏的情况下，还会打架的牛的对数。如果可以完全分隔开牛，那么还需要输出需要建立的最少的栅栏数。</p>
<h2>样例输入</h2>
<div class="codehilite"><pre>2
5 5 3 4
1 2 2 2
2 3 3 3
2 4 2 5

5 5 3 1
1 2 2 2
2 3 3 3
2 4 2 5
</pre></div>


<h2>样例输出</h2>
<div class="codehilite"><pre>0 3
2
</pre></div>


<h2>样例解释</h2>
<p>输入的样例即图示，明显第一个样例中只需要3条栅栏就能把所有敌对的牛分开；第二个样例只能分开1对牛，所以还剩2对敌对关系的牛。</p>
<h2>提示</h2>
<p>巨大的输入量，请使用C风格的输入。</p>
        </article>
      </div>
    </div></div></td>
  </tr>
  <tr>
    <td colspan="3">&nbsp;</td>
  </tr>
  <tr>
    <td colspan="3"><h3>Sample Input </h3></td>
  </tr>
  
  <tr>
    <td colspan="3"><pre></pre></td>
  </tr>
  
  <tr>
    <td colspan="3">&nbsp;</td>
  </tr>
  <tr>
    <td colspan="3"><h3>Sample Output </h3></td>
  </tr>
  
  <tr>
    <td colspan="3"><pre></pre></td>
  </tr>
  <tr>
    <td colspan="3">&nbsp;</td>
  </tr>
  <tr>
    <td colspan="3"><h3>Source</h3></td>
  </tr>
  <tr>
    <td colspan="3"></td>
  </tr>
  <tr>
    <td colspan="3">&nbsp;</td>
  </tr>
		  <tr align="center">
 
    <td colspan="3">[ <a href="/exam/index.php/solution/submit/id/1408/exam_id/427">Submit Code</a> ]
    	[ <a href="/exam/index.php/solution/top20/pid/1408">Top 20 Runs</a> ]
    	[ <a href="/exam/index.php/solution/onlinestatus/exam_id/427/problem_id/1408">Runs Status</a> ]
    	</td>
  </tr>
</table>
  </div>

</div>
  
  <div class="hr"></div>
  <div id="footer_menu">[ <a href="/exam/index.php">Home Page</a> ]&nbsp;&nbsp;[ <A HREF="javascript:self.location=document.referrer">Go Back</A> ]</div>
  <div class="hr"></div>
  <div id="footer">&copy;2008 XTU OnlineJudge Powered by XieBin, HuKun</div>
</body>
</html>